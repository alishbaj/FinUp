<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BudgetBrew - Brew Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Comfortaa:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/loading.css">
    <link rel="stylesheet" href="css/icons.css">
</head>
<body>
    <div id="navbar-container"></div>

    <div class="container mt-5">
        <h1 class="mb-4 magical-title"><span style="color: #667eea; font-size: 1.2em;">âš—</span> Your Brew Cauldron</h1>

        <!-- Main Cauldron Display -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="cauldron-dashboard">
                    <div class="cauldron-landing" id="mainCauldron">
                        <div class="cauldron-liquid-landing" id="mainCauldronLiquid"></div>
                        <div class="category-bubbles-container" id="categoryBubblesContainer">
                            <!-- Category bubbles will be generated here -->
                        </div>
                        <div class="sparks-landing" id="sparksContainer">
                            <!-- Sparks will be generated based on budget score -->
                        </div>
                        <div class="potion-stability-display">
                            <div class="stability-label">Potion Stability</div>
                            <div class="stability-score" id="potionStability">--</div>
                            <div class="stability-bar">
                                <div class="stability-fill" id="stabilityFill"></div>
                            </div>
                        </div>
                    </div>
                    <div class="cauldron-info mt-3">
                        <h4 id="cauldronTitle">Your Budget Cauldron</h4>
                        <p class="text-muted" id="cauldronDescription">Calculating your budget score...</p>
                        <div class="budget-score-display mt-2">
                            <span class="budget-score-value" id="budgetScoreValue">--</span>
                            <span class="budget-score-label">% Budget Score</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Spending Category Bubbles -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-3"><span style="color: #4facfe; font-size: 1.2em;">â—Š</span> Spending Categories</h3>
                <div class="category-bubbles" id="categoryBubbles">
                    <!-- Bubbles will be generated dynamically -->
                </div>
            </div>
        </div>

        <!-- Weekly AI Summary -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card magical-card ai-summary-card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <span style="color: #667eea; font-size: 1.3em;">â—‰</span> Weekly AI Summary
                        </h5>
                        <div class="ai-summary-content" id="aiSummary">
                            <p class="text-muted">Loading your financial insights...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Goals & Progress Section -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-3"><span style="color: #764ba2; font-size: 1.2em;">â—ˆ</span> Goals & Progress</h3>
            </div>
            <div class="col-md-6 mb-3">
                <div class="card magical-card">
                    <div class="card-body">
                        <h5 class="card-title">Short Term Goals</h5>
                        <div class="crystal-growth" id="shortTermCrystal">
                            <div class="crystal-bar">
                                <div class="crystal-fill" id="shortTermFill" style="width: 0%"></div>
                            </div>
                            <p class="mt-2 mb-0"><small id="shortTermText">No active short-term goals</small></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="card magical-card">
                    <div class="card-body">
                        <h5 class="card-title">Long Term Savings</h5>
                        <div class="crystal-growth" id="longTermCrystal">
                            <div class="crystal-bar">
                                <div class="crystal-fill" id="longTermFill" style="width: 0%"></div>
                            </div>
                            <p class="mt-2 mb-0"><small id="longTermText">No active long-term goals</small></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Smart Coach & Recap -->
        <div class="row mb-5 gy-4 align-items-stretch">
            <div class="col-lg-7">
                <div class="card magical-card coach-card h-100">
                    <div class="card-body d-flex flex-column">
                        <div class="d-flex align-items-center justify-content-between mb-3">
                            <h5 class="card-title mb-0"><span style="color: #f093fb; font-size: 1.3em;">âœ¨</span> Smart Coach Scenario</h5>
                            <button class="btn btn-sm btn-outline-primary glassy-button" id="refreshScenarioBtn">New Scenario</button>
                        </div>
                        <p class="text-muted mb-3" id="scenarioPrompt">Loading a challenge tailored to your latest brew...</p>
                        <div class="coach-choices" id="scenarioChoices"></div>
                        <div class="coach-feedback mt-4" id="scenarioFeedback" aria-live="polite"></div>
                        <div class="coach-progress mt-auto pt-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <small class="text-uppercase text-muted d-block">Momentum Boost</small>
                                    <span class="badge rounded-pill momentum-badge" id="scenarioMomentum">-- pts</span>
                                </div>
                                <button class="btn btn-primary btn-sm glassy-button" id="commitMicroGoalBtn">Commit to Goal</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="card magical-card recap-card h-100">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title"><span style="color: #4facfe; font-size: 1.3em;">ðŸª„</span> Monthly Recap</h5>
                        <p class="text-muted" id="monthlyRecapHighlight">Synthesizing your recent performance...</p>
                        <hr>
                        <h6 class="text-uppercase text-muted mb-3">Micro Goals</h6>
                        <ul class="list-unstyled micro-goal-list flex-grow-1" id="microGoalList">
                            <li class="text-muted">Weaving short-term goals to match your brew...</li>
                        </ul>
                        <div class="mt-3">
                            <small class="text-uppercase text-muted d-block">Next Check-in</small>
                            <span class="next-checkin-chip" id="nextCheckIn">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Metrics Cards -->
        <div class="row">
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card metric-card">
                    <div class="card-body">
                        <h5 class="card-title">Budget Adherence</h5>
                        <div class="metric-value" id="budgetAdherence">--</div>
                        <div class="progress mt-2">
                            <div class="progress-bar" role="progressbar" id="budgetProgress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card metric-card">
                    <div class="card-body">
                        <h5 class="card-title">Saving Progress</h5>
                        <div class="metric-value" id="savingProgress">--</div>
                        <div class="progress mt-2">
                            <div class="progress-bar bg-success" role="progressbar" id="savingProgressBar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card metric-card">
                    <div class="card-body">
                        <h5 class="card-title">Investment Performance</h5>
                        <div class="metric-value" id="investmentPerformance">--</div>
                        <div class="progress mt-2">
                            <div class="progress-bar bg-info" role="progressbar" id="investmentProgress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card metric-card">
                    <div class="card-body">
                        <h5 class="card-title">Quiz Score</h5>
                        <div class="metric-value" id="quizScore">--</div>
                        <div class="progress mt-2">
                            <div class="progress-bar bg-warning" role="progressbar" id="quizProgress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/loading.js"></script>
    <script src="js/nav.js"></script>
    <script src="js/brew.js"></script>
    <script>
        document.getElementById('navbar-container').innerHTML = createNavbar('brew');
    </script>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 BudgetBrew. All rights reserved.</p>
            <p>Brew your way to financial freedom with Poyo!</p>
            <p><small>Made with âœ¨ magic and ðŸ’° financial wisdom</small></p>
        </div>
    </footer>
</body>
</html>

